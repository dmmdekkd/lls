import{r as m,e as L,w as R,f as U,t as b,u as D,g as O,_ as N,o as d,c as f,h as A,v as F,a as v,n as P,i as y,F as k,j as I,k as B,l as w,m as H}from"./app-CHBr7rmT.js";const V=[{path:"/",title:"主页",pathLocale:"/",contents:[{header:"",slug:"",content:"与我联系 3448585471"}]},{path:"/get-started.html",title:"附页",pathLocale:"/",contents:[{header:"附页",slug:"附页",content:""},{header:"晴酱机器人",slug:"晴酱机器人",content:"官方 点击拉群"},{header:"",slug:"",content:"第三方 加主人拉群"}]},{path:"/en/",title:"主页",pathLocale:"/en/",contents:[{header:"",slug:"",content:"与我联系 3448585471"}]},{path:"/en/get-started.html",title:"附页",pathLocale:"/en/",contents:[{header:"附页",slug:"附页",content:""},{header:"晴酱机器人",slug:"晴酱机器人",content:"官方 点击拉群"},{header:"",slug:"",content:"第三方 加主人拉群"}]},{path:"/404.html",title:"",pathLocale:"/",contents:[{header:"",slug:"",content:"404 Not Found"}]}],j="update-vuepress-plugin-full-text-search2-search-index";var S=m(V),K=L(()=>{const e=new Map;for(const t of S.value)e.set(t.path,t);return e});import.meta.webpackHot&&(__VUE_HMR_RUNTIME__[j]=e=>{S.value=e});function _(e){const t=m([]);let l=null;return R(e,()=>{l&&clearTimeout(l),l=setTimeout(o,100)}),t;function o(){const u=e.value.toLowerCase().trim();if(!u){t.value=[];return}const a=new Map,n=new Set;for(const s of S.value)for(const i of z(s,u)){n.add(i.parentPageTitle);let r=a.get(i.parentPageTitle);r||(r=[],a.set(i.parentPageTitle,r)),r.push(i)}const c=[...n].sort((s,i)=>{const r=a.get(s);return a.get(i).length-r.length});t.value=[...a].flatMap(([,s])=>s).sort((s,i)=>s.parentPagePriority-i.parentPagePriority||c.indexOf(s.parentPageTitle)-c.indexOf(i.parentPageTitle)||s.priority-i.priority)}}function*z(e,t){const l=M(e.title,t);if(l){yield{path:e.path,parentPageTitle:T(e),title:e.title,display:l,page:e,content:null,parentPagePriority:1,priority:1};return}for(const o of e.contents){const u=M(o.header,t);if(u){yield{path:e.path+(o.slug?`#${o.slug}`:""),parentPageTitle:T(e),title:e.title,display:u,page:e,content:null,parentPagePriority:10,priority:2};continue}const a=M(o.content,t);a&&(yield{path:e.path+(o.slug?`#${o.slug}`:""),parentPageTitle:T(e),title:e.title,display:[{type:"header",str:`${o.header}
`},...a],page:e,content:null,parentPagePriority:10,priority:10})}}function T(e){const t=e.path.split("/");let l="/";return t[1]&&(l=`/${t[1]}/`),(K.value.get(l)||e).title}function M(e,t){const l=[];let o=0;const u=e.toLowerCase().replace(/\s/gu," ");let a=0,n=u.indexOf(t,a);if(n<0)return null;for(;n>=0;){const s=n+t.length;if(c(e.slice(a,n),"normal"),c(e.slice(n,s),"highlight"),a=s,n=u.indexOf(t,a),o>100)break}return c(e.slice(a),"normal"),l.filter(s=>s.str);function c(s,i){let r=s;i==="normal"&&r.length>100&&o===0&&(r=`… ${r.slice(-10)}`);let g=!1;if(o+r.length>100){if(l.some(h=>h.type==="ellipsis"))return;r=r.slice(0,Math.max(100-o,1)),g=!0}l.push({type:i,str:r}),o+=r.length,g&&(l.push({type:"ellipsis",str:" …"}),o+=2)}}var q={};const x=q,G=U({name:"SearchBox",props:{locales:{type:Object,required:!1,default:()=>x}},setup(e){const{locales:t}=b(e),l=m(""),o=m(!1),u=m(-1),a=_(l),n=L(()=>l.value&&o.value&&a.value.length),c=D(),s=O(),i=L(()=>t.value[s.value]??{});function r(){if(!n.value)return;let p=u.value-1;p<0&&(p=a.value.length-1),h(p)}function g(){if(!n.value)return;let p=u.value+1;p>=a.value.length&&(p=0),h(p)}function h(p){u.value=p}function C(){u.value=-1}function E(p){if(!n.value)return;const $=a.value[p];$&&c.push($.path)}return{query:l,focused:o,focusIndex:u,suggestions:a,activeSuggestion:n,onUp:r,onDown:g,focus:h,unfocus:C,go:E,locale:i}}}),J={class:"search-box",role:"search"},Q=["placeholder"],W=["onMousedown","onMouseenter"],X=["href"],Y={key:0,class:"parent-page-title"},Z={class:"suggestion-row"},ee={class:"page-title"},te={class:"suggestion-content"};function ne(e,t,l,o,u,a){return d(),f("div",J,[A(v("input",{ref:"input","onUpdate:modelValue":t[0]||(t[0]=n=>e.query=n),"aria-label":"Search",class:P({focused:e.focused}),placeholder:e.locale.placeholder??"Search",autocomplete:"off",spellcheck:"false",onFocus:t[1]||(t[1]=()=>e.focused=!0),onBlur:t[2]||(t[2]=()=>e.focused=!1),onKeyup:[t[3]||(t[3]=y(n=>e.go(e.focusIndex),["enter"])),t[4]||(t[4]=y((...n)=>e.onUp&&e.onUp(...n),["up"])),t[5]||(t[5]=y((...n)=>e.onDown&&e.onDown(...n),["down"]))]},null,42,Q),[[F,e.query]]),e.activeSuggestion?(d(),f("ul",{key:0,class:"suggestions",onMouseleave:t[7]||(t[7]=(...n)=>e.unfocus&&e.unfocus(...n))},[(d(!0),f(k,null,I(e.suggestions,(n,c)=>(d(),f("li",{key:c,class:P(["suggestion",{focused:c===e.focusIndex}]),onMousedown:s=>e.go(c),onMouseenter:s=>e.focus(c)},[v("a",{href:n.path,onClick:t[6]||(t[6]=H(()=>{},["prevent"]))},[n.parentPageTitle&&(!e.suggestions[c-1]||e.suggestions[c-1].parentPageTitle!==n.parentPageTitle)?(d(),f("div",Y,w(n.parentPageTitle),1)):B("",!0),v("div",Z,[v("div",ee,w(n.title||n.path),1),v("div",te,[(d(!0),f(k,null,I(n.display,(s,i)=>(d(),f("span",{key:i,class:P(s.type)},w(s.str),3))),128))])])],8,X)],42,W))),128))],32)):B("",!0)])}const oe=N(G,[["render",ne],["__scopeId","data-v-e568ca5f"],["__file","SearchBox.vue"]]);export{oe as default};
